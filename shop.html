<!DOCTYPE html>
<html class="no-js" lang="zxx">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="meta description">
    <title>Ananas - Shoes Store</title>
    <!--=== Favicon ===-->
    <link rel="shortcut icon" href="assets/img/favicon.ico" type="image/x-icon" />
    <!--=== All Plugins CSS ===-->
    <link href="assets/css/plugins.css" rel="stylesheet">
    <!--=== All Vendor CSS ===-->
    <link href="assets/css/vendor.css" rel="stylesheet">
    <!--=== Main Style CSS ===-->
    <link href="assets/css/style.css" rel="stylesheet">
    <!-- Modernizer JS -->
    <script src="assets/js/modernizr-2.8.3.min.js"></script>

</head>

<body>

    <!-- Start Header Area -->
    <header class="header-area">
        <!-- main header start -->
        <div class="main-header d-none d-lg-block">
            <!-- header middle area start -->
            <div class="header-main-area sticky">
                <div class="container">
                    <div class="row align-items-center position-relative">
                        <!-- start logo area -->
                        <div class="col-lg-2">
                            <div class="logo">
                                <a href="index-2.html">
                                    <img src="assets/img/logo/logo.png" alt="">
                                </a>
                            </div>
                        </div>
                        <!-- start logo area -->

                        <!-- main menu area start -->
                        <div class="col-lg-8 position-static">
                            <div class="main-menu-area">
                                <div class="main-menu">
                                    <!-- main menu navbar start -->
                                    <nav class="desktop-menu">
                                        <ul>
                                            <li class="active"><a href="index-2.html">Trang chủ</a></li>
                                            <li><a href="shop.html">Cửa hàng</a></li>
                                            <li><a href="contact-us.html">Liên hệ</a></li>
                                        </ul>
                                    </nav>
                                    <!-- main menu navbar end -->
                                </div>
                            </div>
                        </div>
                        <!-- main menu area end -->

                        <!-- mini cart area start -->
                        <div class="col-lg-2">
                            <div class="header-configure-wrapper">
                                <div class="header-configure-area">
                                    <ul class="nav justify-content-end">
                                        <li>
                                            <a href="#" class="offcanvas-btn">
                                                <i class="ion-ios-search-strong"></i>
                                            </a>
                                        </li>
                                        <li class="user-hover">
                                            <a href="#">
                                                <i class="ion-ios-gear-outline"></i>
                                            </a>
                                            <ul class="dropdown-list">
                                                <li><a href="login-register.html">Đăng nhập</a></li>
                                                <li><a href="login-register.html">Đăng ký</a></li>
                                                <li><a href="my-account.html">Tài khoản</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="#" class="minicart-btn">
                                                <i class="ion-bag"></i>
                                                <div class="notification" id="cart-quantity">0</div>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- mini cart area end -->
                    </div>
                </div>
            </div>
            <!-- header middle area end -->
        </div>
        <!-- main header start -->
    </header>
    <!-- end Header Area -->

    <!-- off-canvas menu start -->
    <aside class="off-canvas-wrapper">
        <div class="off-canvas-overlay"></div>
        <div class="off-canvas-inner-content">
            <div class="btn-close-off-canvas">
                <i class="ion-android-close"></i>
            </div>

            <div class="off-canvas-inner">
                <!-- search box start -->
                <div class="search-box-offcanvas">
                    <form>
                        <input type="text" placeholder="Search Here...">
                        <button class="search-btn"><i class="ion-ios-search-strong"></i></button>
                    </form>
                </div>
                <!-- search box end -->
            </div>
        </div>
    </aside>
    <!-- off-canvas menu end -->
    <!-- main wrapper start -->
    <main>
        <!-- page main wrapper start -->
        <div class="shop-main-wrapper mt-5 mb-5">
            <div class="container">
                <div class="row">
                    <!-- sidebar area start -->
                    <div class="col-lg-3 order-2 order-lg-1">
                        <div class="sidebar-wrapper">
                            <!-- single sidebar start -->
                            <div class="sidebar-single">
                                <div class="sidebar-title">
                                    <h3>Danh muc</h3>
                                </div>
                                <div class="sidebar-body">
                                    <ul class="color-list">
                                        
                                    </ul>
                                </div>
                            </div>
                            <!-- single sidebar end -->

                            <!-- single sidebar start -->
                            <div class="sidebar-single">
                                <div class="sidebar-title">
                                    <h3>Lọc theo giá</h3>
                                </div>
                                <div class="sidebar-body">
                                    <div class="price-range-wrap">
                                        <div class="price-range" data-min="20" data-max="400"></div>
                                        <div class="range-slider">
                                            <form action="#">
                                                <div class="price-input">
                                                    <label for="amount">Giá: </label>
                                                    <input type="text" id="amount">
                                                </div>
                                                <button class="filter-btn">Lọc</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- single sidebar end -->

                            <!-- single sidebar end -->

                            <!-- single sidebar start -->
                            <div class="sidebar-single">
                                <div class="sidebar-banner">
                                    <a href="#">
                                        <img src="assets/img/banner/banner_left.jpg" alt="">
                                    </a>
                                </div>
                            </div>
                            <!-- single sidebar end -->
                        </div>
                    </div>
                    <!-- sidebar area end -->

                    <!-- shop main wrapper start -->
                    <div class="col-lg-9 order-1 order-lg-2">
                        <div class="shop-product-wrapper">
                            <!-- shop product top wrap start -->
                            <div class="shop-top-bar">
                                <div class="row">
                                    <div class="col-xl-5 col-lg-4 col-md-3 order-2 order-md-1">
                                        <div class="top-bar-left">
                                            <div class="product-view-mode">
                                                <a class="active" href="#" data-target="grid-view"><i
                                                        class="fa fa-th"></i></a>
                                                <a href="#" data-target="list-view"><i class="fa fa-list"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-7 col-lg-8 col-md-9 order-1 order-md-2">
                                        <div class="top-bar-right">
                                            <div class="product-short">
                                                <p>Sort By : </p>
                                                <select class="nice-select" name="sortby">
                                                    <option value="">Liên quan</option>
                                                    <option value="productName">Tên (A - Z)</option>
                                                    <option value="price,asc">Giá từ thấp đến cao</option>
                                                    <option value="price,desc">Giá từ cao đến thấp</option>
                                                    <option value="rate">Đánh giá cao nhất</option>
                                                    <option value="soldQuantity">Lượt mua cao nhất</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- shop product top wrap start -->

                            <!-- product item list start -->
                            <div class="shop-product-wrap grid-view row mbn-50">

                                <!--sản phẩm được thêm động tại đây-->

                            </div>
                            <!-- product item list end -->

                            <!-- start pagination area -->
                            <div class="paginatoin-area text-center mt-45">
                                <ul class="pagination-box">
                                    <li><a class="Previous" href="#"><i class="ion-ios-arrow-left"></i></a></li>
                                    <li class="active"><a href="#">1</a></li>
                                    <li><a href="#">2</a></li>
                                    <li><a href="#">3</a></li>
                                    <li><a class="Next" href="#"><i class="ion-ios-arrow-right"></i></a></li>
                                </ul>
                            </div>
                            <!-- end pagination area -->
                        </div>
                    </div>
                    <!-- shop main wrapper end -->
                </div>
            </div>
        </div>
        <!-- page main wrapper end -->
    </main>
    <!-- main wrapper end -->

    <!-- Quick view modal start -->
    <div class="modal fade" id="quick_view" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="margin-top: 5px;"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <!-- Image Section -->
                        <div class="col-md-6">
                            <div class="product-large-slider" style="position: relative; overflow: hidden;">
                                <img id="mainImage" src="" alt="Product Image" class="img-fluid zoomable">
                            </div>
                            <div class="product-thumbnails mt-3 d-flex">
                                <!-- Thumbnail Images -->
                                <img id="thumb1" src="" alt="Thumbnail 1" class="img-thumbnail me-2 thumbnail" style="cursor: pointer;">
                                <img id="thumb2" src="" alt="Thumbnail 2" class="img-thumbnail me-2 thumbnail" style="cursor: pointer;">
                                <img id="thumb3" src="" alt="Thumbnail 3" class="img-thumbnail me-2 thumbnail" style="cursor: pointer;">
                                <img id="thumb4" src="" alt="Thumbnail 4" class="img-thumbnail me-2 thumbnail" style="cursor: pointer;">
                            </div>
                        </div>
                        <!-- Details Section -->
                        <div class="col-md-6">
                            <div class="product-details">
                                <h5 style="margin-bottom: 10px;" class="modal-title" id="productName">Product Name</h5>
                                <p style="margin-bottom: 10px;" id="reviews"><span>1 Review(s)</span></p>
                                <div style="margin-bottom: 10px;" class="price-box">
                                    <span id="currentPrice" class="price-regular">$70.00</span>
                                    <span id="oldPrice" class="price-old text-muted"><del>$80.00</del></span>
                                </div>
                                <p style="margin-bottom: 10px;" id="description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                                <div class="availability">
                                    <strong>Availability:</strong> <span id="availability" class="text-success">In Stock</span>
                                </div>
                                <div style="margin-bottom: 10px;" class="quantity mt-3">
                                    <label for="quantityInput">Quantity:</label>
                                    <input id="quantityInput" type="number" value="1" min="1" class="form-control w-25 d-inline">
                                    <button id="addToCart" class="btn btn-dark ms-2">Add to Cart</button>
                                </div>
                                <div style="margin-bottom: 10px;" class="social-share mt-3">
                                    <strong>Share:</strong>
                                    <a href="#" class="ms-2"><i class="ion-social-facebook"></i></a>
                                    <a href="#" class="ms-2"><i class="ion-social-twitter"></i></a>
                                    <a href="#" class="ms-2"><i class="ion-social-pinterest"></i></a>
                                    <a href="#" class="ms-2"><i class="ion-social-googleplus"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick view modal end -->

    <!-- Start Footer Area Wrapper -->
    <footer class="footer-wrapper">
        <!-- footer main area start -->
        <div class="footer-widget-area mt-5">
            <div class="container">
                <div class="row mtn-40">
                    <!-- footer widget item start -->
                    <div class="col-xl-5 col-lg-3 col-md-6">
                        <div class="widget-item mt-40">
                            <h5 class="widget-title">My Account</h5>
                            <div class="widget-body">
                                <ul class="location-wrap">
                                    <li><i class="ion-ios-location-outline"></i>Minh Khai Ward, Bac Tu Liem District,
                                        Hanoi City.</li>
                                    <li><i class="ion-ios-email-outline"></i>Mail: <a
                                            href="mailto:yourmail@gmail.com">yourmail@gmail.com</a></li>
                                    <li><i class="ion-ios-telephone-outline"></i>Phone: <a
                                            href="%2b0025425456554.html">+0123456789</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- footer widget item end -->
                </div>
            </div>
        </div>
        <!-- footer main area end -->
    </footer>
    <!-- End Footer Area Wrapper -->

    <!-- offcanvas search form start -->
    <div class="offcanvas-search-wrapper">
        <div class="offcanvas-search-inner">
            <div class="offcanvas-close">
                <i class="ion-android-close"></i>
            </div>
            <div class="container">
                <div class="offcanvas-search-box">
                    <form class="d-flex bdr-bottom w-100">
                        <input type="text" placeholder="Search entire storage here...">
                        <button class="search-btn"><i class="ion-ios-search-strong"></i>search</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- offcanvas search form end -->

    <!-- offcanvas mini cart start -->
    <div class="offcanvas-minicart-wrapper">
        <div class="minicart-inner">
            <div class="offcanvas-overlay"></div>
            <div class="minicart-inner-content">
                <div class="minicart-close">
                    <i class="ion-android-close"></i>
                </div>
                <div class="minicart-content-box">
                    <div class="minicart-item-wrapper">
                        <ul>
                            <li class="minicart-item">
                                <div class="minicart-thumb">
                                    <a href="product-details.html">
                                        <img src="assets/img/cart/cart-1.jpg" alt="product">
                                    </a>
                                </div>
                                <div class="minicart-content">
                                    <h3 class="product-name">
                                        <a href="product-details.html">Flowers bouquet pink for all flower lovers</a>
                                    </h3>
                                    <p>
                                        <span class="cart-quantity">1 <strong>&times;</strong></span>
                                        <span class="cart-price">$100.00</span>
                                    </p>
                                </div>
                                <button class="minicart-remove"><i class="ion-android-close"></i></button>
                            </li>
                            <li class="minicart-item">
                                <div class="minicart-thumb">
                                    <a href="product-details.html">
                                        <img src="assets/img/cart/cart-2.jpg" alt="product">
                                    </a>
                                </div>
                                <div class="minicart-content">
                                    <h3 class="product-name">
                                        <a href="product-details.html">Jasmine flowers white for all flower lovers</a>
                                    </h3>
                                    <p>
                                        <span class="cart-quantity">1 <strong>&times;</strong></span>
                                        <span class="cart-price">$80.00</span>
                                    </p>
                                </div>
                                <button class="minicart-remove"><i class="ion-android-close"></i></button>
                            </li>
                        </ul>
                    </div>

                    <div class="minicart-pricing-box">
                        <ul>
                            <li>
                                <span>sub-total</span>
                                <span><strong>$300.00</strong></span>
                            </li>
                            <li>
                                <span>Eco Tax (-2.00)</span>
                                <span><strong>$10.00</strong></span>
                            </li>
                            <li>
                                <span>VAT (20%)</span>
                                <span><strong>$60.00</strong></span>
                            </li>
                            <li class="total">
                                <span>total</span>
                                <span><strong>$370.00</strong></span>
                            </li>
                        </ul>
                    </div>

                    <div class="minicart-button">
                        <a href="cart.html"><i class="fa fa-shopping-cart"></i> view cart</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- offcanvas mini cart end -->

    <!-- Scroll to top start -->
    <div class="scroll-top not-visible">
        <i class="fa fa-angle-up"></i>
    </div>
    <!-- Scroll to Top End -->

    <!--=======================Javascript============================-->
    <!--=== All Vendor Js ===-->
    <script src="assets/js/vendor.js"></script>
    <!--=== All Plugins Js ===-->
    <script src="assets/js/plugins.js"></script>
    <!--=== Active Js ===-->
    <script src="assets/js/active.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const apiEndpoint = "http://localhost:8080/product";
            const categoryApi = "http://localhost:8080/category";
            const productCountApi = "http://localhost:8080/product/category/";
            const cartQuantityApi = "http://localhost:8080/cart/quantity";
            const token = localStorage.getItem('token');
            const id = localStorage.getItem('userId');
    
            let currentPage = 0; // Trang hiện tại
            let condition = "";

            var filter = "";
    
            // Lấy danh sách category
            fetch(categoryApi)
                .then(response => response.json())
                .then(data => {
                    if (data.code === 200) {
                        const categories = data.result;
                        const categoryList = document.querySelector(".color-list");
                        categoryList.innerHTML = ""; // Xóa danh sách hiện tại
    
                        categories.forEach(category => {
                            fetch(productCountApi + category.categoryId)
                                .then(response => response.json())
                                .then(countData => {
                                    if (countData.code === 200) {
                                        const productCount = countData.result;
    
                                        // Tạo item trong danh sách
                                        const categoryItem = document.createElement("li");
                                        categoryItem.innerHTML = `
                                            <a href="#" data-category="${category.categoryName}">${category.categoryName} <span>(${productCount})</span></a>
                                        `;
                                        categoryList.appendChild(categoryItem);
                                    }
                                });
                        });
                    }
                });

                $(document).on("click", ".color-list a", function (e) {
                    e.preventDefault(); // Ngăn hành động mặc định
                    const categoryName = $(this).data("category"); // Lấy tên danh mục
                    console.log(categoryName);
                    filter = "category.categoryName~'"+categoryName+"'";
                    loadProducts(0, "", filter); // Gọi hàm loadProducts với filter
                });
    
                // Lấy số lượng sản phẩm trong giỏ hàng
                fetch(`${cartQuantityApi}?userId=${id}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.code === 200) {
                            const cartQuantityElement = document.getElementById("cart-quantity");
                            cartQuantityElement.textContent = data.result;
                        }
                    });
    
                // Hàm gọi API và render dữ liệu
                async function loadProducts(page, condition = "", filter = "") {
                    fetch(`${apiEndpoint}?page=${page}&size=9&sort=${condition}&filter=${filter}`)
                        .then(response => response.json())
                        .then(data => {
                            if (data.code === 200) {
                                const products = data.result.result;
                                const meta = data.result.meta;
                                $(".shop-product-wrap").empty();
        
                                // Render sản phẩm
                                products.forEach(product => {
                                    const productHTML = `
                                        <div class="col-lg-4 col-sm-6">
                                            <div class="product-item mb-53">
                                                <div class="product-thumb">
                                                    <a href="product-details.html?id=${product.productId}">
                                                        <img src="http://localhost:8080/images/product/${product.images[0]}" alt="${product.productName}">
                                                    </a>
                                                </div>
                                                <div class="product-content">
                                                    <h5 class="product-name">
                                                        <a href="product-details.html?productId=${product.productId}">${product.productName}</a>
                                                    </h5>
                                                    <div class="price-box">
                                                        <span class="price-regular">$${product.price}</span>
                                                        <span class="price-old"><del>$${product.discount}</del></span>
                                                    </div>
                                                    <div class="product-action-link">
                                                        <a href="#" title="Wishlist"><i class="ion-android-favorite-outline"></i></a>
                                                        <a href="#" title="Add To Cart"><i class="ion-bag"></i></a>
                                                        <a href="#" data-bs-toggle="modal" data-bs-target="#quick_view" data-product-id="${product.productId}">
                                                            <i class="ion-ios-eye-outline"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="product-list-item mb-30">
                                                <div class="product-thumb">
                                                    <a href="product-details.html?productId=${product.productId}">
                                                        <img src="http://localhost:8080/images/product/${product.images[0]}" alt="product thumb">
                                                    </a>
                                                </div>
                                                <div class="product-content-list">
                                                    <h5 class="product-name">
                                                        <a href="product-details.html?productId=${product.productId}">${product.productName}</a>
                                                    </h5>
                                                    <div class="price-box">
                                                        <span class="price-regular">$${product.price}</span>
                                                        <span class="price-old"><del>$${product.discount}</del></span>
                                                    </div>
                                                    <p>${product.description}</p>
                                                    <div class="product-link-2 position-static">
                                                        <a href="#" data-bs-toggle="tooltip" title="Wishlist"><i class="ion-android-favorite-outline"></i></a>
                                                        <a href="#" data-bs-toggle="tooltip" title="Add To Cart"><i class="ion-bag"></i></a>
                                                        <a href="#" data-bs-toggle="modal" data-bs-target="#quick_view">
                                                            <span data-bs-toggle="tooltip" title="Quick View">
                                                                <i class="ion-ios-eye-outline"></i>
                                                            </span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    `;
                                    $(".shop-product-wrap").append(productHTML);
                                   // productWrap.insertAdjacentHTML("beforeend", productHTML);
                                });
        
                                // Gắn sự kiện "Quick View" sau khi render
                                addQuickViewEventListeners();
        
                                // Render phân trang
                                const paginationBox = document.querySelector(".pagination-box");
                                paginationBox.innerHTML = "";
        
                                if (meta.pages > 1) {
                                    paginationBox.innerHTML += `<li><a class="Previous" href="#"><i class="ion-ios-arrow-left"></i></a></li>`;
                                    for (let i = 0; i < meta.pages; i++) {
                                        paginationBox.innerHTML += `
                                            <li class="${i === currentPage ? 'active' : ''}">
                                                <a href="#">${i + 1}</a>
                                            </li>
                                        `;
                                    }
                                    paginationBox.innerHTML += `<li><a class="Next" href="#"><i class="ion-ios-arrow-right"></i></a></li>`;
                                }
                            }
                        });
                    }
    
            // Sự kiện phân trang
            document.addEventListener("click", event => {
                if (event.target.closest(".pagination-box a")) {
                    event.preventDefault();
                    const text = event.target.textContent;
    
                    if (text === "Previous" && currentPage > 0) {
                        currentPage--;
                    } else if (text === "Next") {
                        currentPage++;
                    } else {
                        currentPage = parseInt(text) - 1;
                    }
                    loadProducts(currentPage, condition, filter);
                }
            });
    
            // Sự kiện chọn điều kiện sắp xếp
            document.querySelector(".nice-select ul").addEventListener("click", event => {
                if (event.target.tagName === "LI") {
                    condition = event.target.getAttribute("data-value");
                    loadProducts(currentPage, condition, filter);
                }
            });
    
            // Lấy chi tiết sản phẩm từ API và hiển thị trong modal
            async function fetchQuickViewProduct(productId) {
                try {
                    const response = await fetch(`${apiEndpoint}/${productId}`,{
                        method: "GET",
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    });
                    const data = await response.json();
                    const product = data.result;

                        document.getElementById("productName").textContent = product.productName;
                        document.getElementById("currentPrice").textContent = `$${(product.price * (100 - product.discount) / 100).toFixed(2)}`;
                        document.getElementById("oldPrice").textContent = product.discount ? `$${product.price}` : "";
                        document.getElementById("description").textContent = product.description;
                        document.getElementById("availability").textContent = product.soldQuantity > 0 ? "In Stock" : "Out of Stock";
    
                        const mainImage = `http://localhost:8080/images/product/${product.images[0]}`;
                        document.getElementById('mainImage').src = mainImage;


                        const thumbnails = product.images || [];
                        document.getElementById('thumb1').src = thumbnails[0] ? `http://localhost:8080/images/product/${thumbnails[0]}` : 'http://localhost:8080/images/product/default-image.jpg';
                        document.getElementById('thumb2').src = thumbnails[1] ? `http://localhost:8080/images/product/${thumbnails[1]}` : 'http://localhost:8080/images/product/default-image.jpg';
                        document.getElementById('thumb3').src = thumbnails[2] ? `http://localhost:8080/images/product/${thumbnails[2]}` : 'http://localhost:8080/images/product/default-image.jpg';
                        document.getElementById('thumb4').src = thumbnails[3] ? `http://localhost:8080/images/product/${thumbnails[3]}` : 'http://localhost:8080/images/product/default-image.jpg';

                        const quickViewModal = new bootstrap.Modal(document.getElementById('quick_view'));
                                    quickViewModal.show();

                                    
                                } catch (error) {
                                    console.error("Error fetching product details:", error);
                                }
                            }
    
                // Thêm sự kiện cho nút Quick View
                function addQuickViewEventListeners() {
                    document.querySelectorAll('[data-bs-target="#quick_view"]').forEach(button => {
                        button.addEventListener('click', async (event) => {
                            const productId = event.currentTarget.getAttribute('data-product-id');
                            await fetchQuickViewProduct(productId);
                        });
                    });
                }
            // Phóng to ảnh chính khi di chuột
            const mainImage = document.getElementById('mainImage');
            const thumbnails = document.querySelectorAll('.thumbnail');

            // Thay đổi ảnh chính khi bấm vào thumbnail
            thumbnails.forEach(thumbnail => {
                thumbnail.addEventListener('click', (event) => {
                    const newImageSrc = event.target.src;
                    mainImage.src = newImageSrc;
                });
            });

            // Di chuột để phóng to vùng ảnh
            mainImage.addEventListener('mousemove', (event) => {
                const bounds = mainImage.getBoundingClientRect();
                const xPercent = ((event.clientX - bounds.left) / bounds.width) * 100;
                const yPercent = ((event.clientY - bounds.top) / bounds.height) * 100;
                mainImage.style.transformOrigin = `${xPercent}% ${yPercent}%`;
            });

            mainImage.addEventListener('mouseleave', () => {
                mainImage.style.transformOrigin = 'center center';
            });

            // Gọi lần đầu để tải sản phẩm
            loadProducts(currentPage, condition, filter);
        });
    </script>
</body>



</html>
<style>
    /* modal */
    .img-thumbnail {
        width: 60px;
        height: 60px;
    }
    .price-box .price-regular {
        font-size: 18px;
        font-weight: bold;
        color: #000;
    }
    .price-box .price-old {
        font-size: 16px;
        text-decoration: line-through;
    }
    .availability span {
        font-weight: bold;
    }

    .product-item {
        margin: 0 10px;
        text-align: center;
    }
    .product-thumb img {
        max-width: 100%;
        height: auto;
        border-radius: 5px;
    }
    .zoomable {
        transition: transform 0.2s ease-in-out;
        cursor: zoom-in;
    }
    
    .product-large-slider:hover .zoomable {
        transform: scale(2); /* Phóng to khi hover */
        cursor: zoom-out;
    }
    
    .thumbnail {
        cursor: pointer;
    }
    
    .product-large-slider {
        position: relative;
        overflow: hidden;
    }
</style>